<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ajax Payroll</title>
    <script>
        // a FUNCTION calculateGrossPay() with one parameter, hoursWorked.
        function calculateGrossPay(hoursWorked) {
            const hourlyRate = 19.00;
            let grossPay;

            if (hoursWorked <= 40) {
                grossPay = hoursWorked * hourlyRate;
            } else {
                let regularHours = 40;
                let overtimeHours = hoursWorked - regularHours;
                let regularPay = regularHours * hourlyRate;
                let overtimePay = overtimeHours * hourlyRate * 1.5;
                grossPay = regularPay + overtimePay;
            }
            return grossPay;
        }

        // a FUNCTION calculateSocialSecurity() with one parameter, grossPay.
        function calculateSocialSecurity(grossPay) {
            const socialSecurityRate = 0.062;
            return grossPay * socialSecurityRate;
        }

        // a FUNCTION calculateMedicare() with one parameter, grossPay.
        function calculateMedicare(grossPay) {
            const medicareRate = 0.0145;
            return grossPay * medicareRate;
        }

        // a FUNCTION calculateWithholding() with two parameters, grossPay and allowances.
        function calculateWithholding(grossPay, allowances) {
            const withholdingAllowanceAmount = 77.90;
            const withholdingBase = allowances * withholdingAllowanceAmount;
            const taxableIncome = grossPay - withholdingBase;
            const withholdingRate = 0.20;
            const withholding = taxableIncome * withholdingRate;
            return withholding > 0 ? withholding : 0;
        }

        // a FUNCTION calculateNetPay(), with 4 parameters, grossPay, socialSecurity, medicare and withholding.
        function calculateNetPay(grossPay, socialSecurity, medicare, withholding) {
            return grossPay - socialSecurity - medicare - withholding;
        }

        // a FUNCTION generatePaystub() with 3 parameters, employeeName, hoursWorked and allowances.
        function generatePaystub(employeeName, hoursWorked, allowances) {
            const grossPay = calculateGrossPay(hoursWorked);
            const socialSecurity = calculateSocialSecurity(grossPay);
            const medicare = calculateMedicare(grossPay);
            const withholding = calculateWithholding(grossPay, allowances);
            const netPay = calculateNetPay(grossPay, socialSecurity, medicare, withholding);

            document.getElementById("payrollStub").innerHTML = `
                <strong>Employee Name:</strong> ${employeeName}<br>
                <strong>Hours Worked:</strong> ${hoursWorked}<br>
                <strong>Allowances:</strong> ${allowances}<br>
                <strong>Gross Pay:</strong> $${grossPay.toFixed(2)}<br>
                <strong>Social Security:</strong> $${socialSecurity.toFixed(2)}<br>
                <strong>Medicare:</strong> $${medicare.toFixed(2)}<br>
                <strong>Withholding:</strong> $${withholding.toFixed(2)}<br>
                <strong>Net Pay:</strong> $${netPay.toFixed(2)}<br>
            `;
        }

        // a FUNCTION doPayroll() with no parameters.  This is the main program.
        function main() {
            const form = document.forms["employeeForm"];
            const firstName = form.elements[0].value.trim();
            const lastName = form.elements[1].value.trim();
            const hoursWorked = parseFloat(form.elements[2].value);
            const allowances = parseInt(form.elements[3].value);

            if (!firstName || !lastName || isNaN(hoursWorked) || isNaN(allowances)) {
                alert("Please fill out all fields with valid values!");
                return;
            }

            const fullName = firstName + " " + lastName;
            generatePaystub(fullName, hoursWorked, allowances);
        }
    </script>
</head>
<body>
    <h1>Ajax Payroll</h1>
    <hr />
    <form name="employeeForm">
        First Name: <input type="text"><br />  
        Last Name: <input type="text"><br />
        Enter Hours Worked: <input type="text"><br />
        Enter number of withholding allowances: <input type="text"><br />
        <input type="button" value="Submit" onclick="main()">
    </form>

    <h3>Payroll Stub</h3>
    <p id="payrollStub"></p>
</body>
</html>
