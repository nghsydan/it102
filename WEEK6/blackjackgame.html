<!DOCTYPE html>
<html>
  <head>
    <title>Blackjack Game</title>
  </head>
  <body>
    <h1>Blackjack Simulation</h1>

    <script>
      // CARD OBJECT CONSTRUCTOR
      function Card(suit, rank, value) {
        this.suit = suit;
        this.rank = rank;
        this.value = value;
        this.isVisible = false;

        this.show = function() {
          this.isVisible = true;
        };

        this.hide = function() {
          this.isVisible = false;
        };
      }


      // DECK OBJECT CONSTRUCTOR
      function Deck() {
        this.suits = ["Hearts", "Diamonds", "Clubs", "Spades"];
        this.ranks = [
          "Ace",
          "2",
          "3",
          "4",
          "5",
          "6",
          "7",
          "8",
          "9",
          "10",
          "Jack",
          "Queen",
          "King"
        ];
        this.cards = [];

        // Create 52 cards
        for (let suit of this.suits) {
          for (let i = 0; i < this.ranks.length; i++) {
            let rank = this.ranks[i];
            let value = i + 1;
            if (value > 10) value = 10; // J, Q, K are worth 10
            if (rank === "Ace") value = 11; // Ace is 11 for simplicity
            this.cards.push(new Card(suit, rank, value));
          }
        }

        // Method to draw a random card
        this.drawCard = function() {
          let index = Math.floor(Math.random() * this.cards.length);
          return this.cards[index];
        };
      }

      
      // MAIN GAME LOGIC
      function playBlackjack() {
        let deck = new Deck();
        let total = 0;
        let dealerTotal = 0;
        let hitMe = true;

        alert("Welcome to Blackjack!");

        // Player keeps drawing cards until they choose to stop
        while (hitMe) {
          let card = deck.drawCard();
          total += card.value;

          alert(
            `You drew: ${card.rank} of ${card.suit}\nCurrent total: ${total}`
          );

          if (total > 21) {
            alert("You busted! Over 21.");
            return;
          }

          let response = prompt("Take another card? (Y/N)").toUpperCase();
          if (response !== "Y") {
            hitMe = false;
          }
        }

        // Dealer draws 2 cards (simplified)
        dealerTotal =
          deck.drawCard().value + deck.drawCard().value;

        alert(`Dealer's total: ${dealerTotal}`);

        // Determine winner
        if (dealerTotal > 21 || total > dealerTotal) {
          alert("ðŸŽ‰ You win!");
        } else if (dealerTotal === total) {
          alert("It's a tie!");
        } else {
          alert("Dealer wins ðŸ˜¢");
        }
      }

      // RUN THE GAME

      playBlackjack();
    </script>
  </body>
</html>
